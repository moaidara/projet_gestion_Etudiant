#:kivy 2.1.0  
#: import hex kivy.utils.get_color_from_hex
#conversion des codes hexadecimaux en couleurs rgba

#: set noir "#000000" 
# Definit une variable 'noir' a travers le code hexadecimal

#: set blanc "#ffffff" 
# Definit une variable 'blanc' a travers le code hexadecimal

#: set bleu "#0011" 
# Definit une variable 'bleu' a travers le code hexadecimal

#: set small dp(12) 
# Definit une variable 'small' de taille 12

#: set medium dp(24) 
# Definit une variable 'meduim' de taille 24

#: set extra dp(36) 
# Definit une variable 'extra' de taille 36

#: set radius_ dp (20) 
# Definit une variable 'raduis' de taille 20

#: set round dp(20) 
# Definit une variable 'round' a travers le code hexadecimal

<Modifier_note>:
    orientation: "vertical"
    canvas.before:
        Color:
            rgba: 0.2, 0.6, 0.8, 1   
        Rectangle:
            source: "img/image.jpg"
            pos:self.pos
            size: self.size     
    Label:
        canvas.before:
            Color:
                rgba: 0,0,0,0.75
            Rectangle:
                pos: self.pos
                size: self.size       
        text: "Modifier la note de l'etudiant"
        font_size: dp(30)
        size_hint: 1, 0.5
    
    FloatLayout:
        orientation: "vertical"
        canvas.before:
            Color:
                rgb: hex(blanc)
            RoundedRectangle:
                pos:self.pos
                size: self.size
                radius: radius_, radius_
        size_hint: 0.9, 2.9 
        pos_hint: {"center_x":0.5, "center_y":0.45}   
        Label:
            id:message_label
            text: "" 
            font_size: dp(10)
            pos_hint: {"center_x":0.5,"y":0.85}
            size_hint: 1, 0.2
            color: 1, 0, 0, 1
            halign: "center"
            valign: "middle"         
        BoxLayout:
            orientation: "horizontal"
            size_hint:0.36, 0.07
            pos_hint:{"center_x":0.48, "top":0.9}
            spacing: dp(10)
            Label:
                text:"matricule"
                color: 0,0,0
                font_name: "Roboto"
                text_size: self.size
                valign:"middle"
                halign:"right"
                font_size: dp(20)
            TextInput:
                id: matricule
                multiline: False
                write_tab: False
                font_size: dp(20)
                size_hint:1, 1
                on_text: root.validate_inputs()
        BoxLayout:
            orientation:"horizontal"
            size_hint:0.5, 0.07
            pos_hint:{"center_x":0.45, "top":0.75}
            spacing: dp(70)
            Label:
                text:"Matiere"
                color: 0,0,0
                font_name: "Roboto"
                text_size: self.size
                font_size: dp(45)
                valign:"middle"
                halign:"right"
                font_size: dp(20)   
            Spinner:
                id: matiere
                text: "matiere"
                values: ['Anglais', 'Algo', 'Probabilite', 'Java', 'Reseau']
                font_name:"Roboto"
                font_size:dp(20)
                background_color: [0.9, 0.9, 0.9, 0.25]
                foreground_color: [0.5, 0.5, 0.5, 1]
                color: [0, 0, 0, 1]                
                text_size:self.size
                halign:"center"
                valign:"middle"
                disabled: True
                disabled_color: [0, 0, 0, 1]
                multiline: False
                write_tab: False
            
                            
        BoxLayout:
            orientation:"horizontal"
            size_hint:0.9, 0.07
            pos_hint:{"center_x":0.45, "top":0.65}
            spacing: dp(70)
            Label:
                text:"Note"
                color: 0,0,0
                font_name: "Roboto"
                text_size: self.size
                font_size: dp(45)
                valign:"middle"
                halign:"right"
                font_size: dp(20)   
            Spinner:
                id: devoir
                text: "devoir"
                font_name:"Roboto"
                font_size:dp(20)
                values: ['0','1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20']
                background_color: [0.9, 0.9, 0.9, 0.25]
                foreground_color: [0.5, 0.5, 0.5, 1]
                color: [0, 0, 0, 1]                
                text_size:self.size
                halign:"center"
                valign:"middle"
                disabled: True
                disabled_color: [0, 0, 0, 1]
                multiline: False
                write_tab: False
            Spinner:
                id: exam
                text: "exam"
                font_name:"Roboto"
                values: ['0','1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15', '16', '17', '18', '18', '19', '20']
                font_size:dp(20)
                background_color: [0.9, 0.9, 0.9, 0.25]
                foreground_color: [0.5, 0.5, 0.5, 1]
                color: [0, 0, 0, 1]                
                text_size:self.size
                halign:"center"
                valign:"middle"
                disabled: True
                disabled_color: [0, 0, 0, 1]
                multiline: False
                write_tab: False

       
        Button:
            text:"Enregistrer"
            size_hint: 0.18, 0.09
            font_size: dp(20)
            background_color: 0.3, 0.7, 1, 1 
            font_name: "Roboto"
            pos_hint:{"right":0.66, "y":0.1}
            on_press:
                app.gestion.Change_Note(matiere.text, matricule.text, exam.text, devoir.text);
                message_label.text = app.gestion.message

        Button:
            text: "Retour"
            font_size: dp(18)
            size_hint: None, 0.09
            width: dp(150)
            pos_hint:{"right":0.94, "y":0.06}  
            background_color: 0.3, 0.7, 1, 1             
            font_name: "Roboto"    
            on_press: app.gestion.transition.direction='right';app.gestion.current='acceuil' 
        